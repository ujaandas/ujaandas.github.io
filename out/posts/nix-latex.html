<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Nix and LaTex | Ujaan Das</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet" />
  <link href="../static/styles.css" rel="stylesheet" />
  <link rel="icon" type="image/x-icon" href="../static/favicon.ico">
</head>

<body class="flex flex-col items-center justify-center align-middle min-h-screen bg-slate-100 text-gray-800">
  <main class="flex flex-col md:flex-row md:items-start justify-between max-w-3xl mx-auto flex-grow p-6 gap-6">
    
    <div class="flex-shrink-0 hidden md:flex md:flex-col md:items-start md:mt-10 md:mr-10">
      <img src="../static/pfp.webp" alt="Profile picture" class="w-40 h-auto mb-4" />
      <nav class="hidden md:flex md:flex-col md:gap-2 text-sm">
        <a href="https://github.com/ujaandas" target="_blank" class="flex items-center gap-2 hover:underline">
          <i class="fab fa-github"></i> GitHub
        </a>
        <a href="https://linkedin.com/in/ujaandas" target="_blank" class="flex items-center gap-2 hover:underline">
          <i class="fab fa-linkedin"></i> LinkedIn
        </a>
        <a href="https://instagram.com/ujaa_das" target="_blank" class="flex items-center gap-2 hover:underline">
          <i class="fab fa-instagram"></i> Instagram
        </a>
        <a href="static/resume.pdf" target="_blank" class="flex items-center gap-2 hover:underline">
          <i class="fas fa-file-alt"></i> Resume
        </a>
        <a href="mailto:ujaandas03@gmail.com" target="_blank" class="flex items-center gap-2 hover:underline">
          <i class="fas fa-envelope"></i> Email
        </a>
      </nav>
    </div>

    <div class="md:mt-10 w-full">
      <h1 class="text-3xl font-bold mb-4">Nix and LaTex</h1>
      <article class="article">
          <p>Lately, I've been wondering why I've had to put up with Overleaf's awful UX when I could just as well edit my personal documents on my own code editor and track relevant changes with Git. Unfortunately, the first thought that came to my mind was how I could build said documents with Nix.</p>
<h3>The TeX Ecosystem</h3>
<p>Truth be told, I don't know a whole lot about the TeX ecosystem - every research paper or report I've done, I've used Overleaf and offloaded my thinking and ecosystem handling to them. The closest I've come to fiddling with TeX (pdfTeX?) on my local machine was building a pipeline to auto-convert Jupyter Notebooks into PDFs for my machine learning class at Northwestern.</p>
<p>This <a href="https://www.tug.org/levels.html">website</a> does a <em>really</em> good job at summarizing all things TeX, so here's a summary of the summary:</p>
<ul>
<li>TeX comes in various distributions (i.e; complete bundlings of all things TeX) and in my case, I will be using TeX Live</li>
<li>TeX distributions contain various engines - these target specific outputs, such as pdfTeX for pdf output, or XeTeX for unicode</li>
<li>TeX comes in a variety of flavours in the form of formats, the most popular being LaTeX</li>
<li>TeX also comes with several optional packages suited to specific, niche (?) problems</li>
</ul>
<h3>Building a Flake</h3>
<p>Next, building the flake.</p>
<p>TeX distributions, especially Live, can come with thousands of packages, most of which I probably won't need. Luckily, Nix lets us create <a href="https://nixos.wiki/wiki/TexLive">subsets</a> to choose what we want and don't want.</p>
<p>Initially I tried building off of the small set, combining whatever else I wanted on top of that using the <code>.combine</code> directive.</p>
<pre><code class="language-nix">tex =
  with pkgs;
  texlive.combine {
    inherit (texlive) scheme-small latexmk;
  };
</code></pre>
<p>But found that my workflows needed packages which needed packages which needed more packages, so I just ended up using scheme-basic.</p>
<h3>First Flake</h3>
<p>As it stood, my initial <code>flake.nix</code> looked something like this:</p>
<pre><code class="language-nix">{
  description = &quot;Example development environment flake&quot;;

  inputs = {
    nixpkgs.url = &quot;github:NixOS/nixpkgs/nixpkgs-unstable&quot;;
    flake-utils.url = &quot;github:numtide/flake-utils&quot;;
  };

  outputs =
    {
      self,
      nixpkgs,
      flake-utils,
    }:
    flake-utils.lib.eachDefaultSystem (
      system:
      let
        pkgs = nixpkgs.legacyPackages.${system};
        tex =
          with pkgs;
          texlive.combine {
            inherit (texlive) scheme-basic latexmk;
          };
      in
      {
        defaultPackage = pkgs.stdenv.mkDerivation {
          name = &quot;latex-document&quot;;
          src = ./.;
          nativeBuildInputs = [
            tex
          ];

          buildPhase = ''
            latexmk -pdf main.tex
          '';

          installPhase = ''
            mkdir -p $out
            cp main.pdf $out/
          '';
        };
      }
    );
}
</code></pre>
<p>Next up, I wanted to create a way to save each section of my document (e.g; each work experience, each project, each publication, etc...) as its own chunk, and piece/order them using Nix.</p>

      </article>
    </div>
  </main>

  <footer class="flex flex-col justify-center text-center text-sm text-gray-500 mt-12 mb-4">
    <a href="url" class="mb-1">@2492c87</a>
    <p>Â© 2025 Ujaan Das</p>
  </footer>
</body>

</html>
